# Описание

## Создание базы данных
Перед запуском приложения необходимо создать базу данных **Postgres** с именем **jwt_reg_and_auth**, пользователем **postgres** и паролем **postgres**.

После запуска приложения в базе данных автоматически создаются таблицы **usr** и **role** и таблица **role** заполняется данными. Реализовано с помощью **Liquibase**.

Приложение использует порт **8099**.

## Endpoints

* `POST /register` - регистрация пользователя. Обязательные параметры: `email`, `firstName`, `password`. Параметр `lastName` опциональный. Если не заполнен один из обязательных параметров возвращается статус **400** `BAD_REQUEST`. В случае успеха вернется статус **201** `CREATED`. 

  Пример тела запроса:
  
  ```json
  {
    "email": "email@mail.ru",
    "firstName": "Alex",
    "password": "password",
    "lastName": "Smith"
  }
  ```

* `POST /auth` - получение jwt-токена зарегистрированным пользователем. 

  Пример тела запроса:
  
  ```json
  {
    "email": "email@mail.ru",
    "password": "password"
  }
  ```
  В случае отправки запроса на данный endpoint с не валидными данными также вернется статус **400** `BAD_REQUEST`.

* `GET /hello` - возвращает строку "Hello, &lt;authorized user&gt;", где вместо &lt;authorized user&gt; выводится имя авторизованного пользователя. Данный endpoint доступен только авторизованным пользователям. В противном случае вернется статус **401** `FORBIDDEN`.

## Работа приложения

После запуска приложения сначала нужно зарегистрироваться с помощью запроса `POST /register`. 

Затем нужно выполнить запрос `POST /auth` и получить jwt-токен. 

Далее, нужно выполнить запрос `GET /hello`, добавив в заголовок *Authorization* полученный ранее jwt-токен и выбрав тип заголовка *Barer-token* (в Postman нужно открыть вкладку Authorization, выбрать Type - Barer Token и вставить jwt-токен в поле Token).